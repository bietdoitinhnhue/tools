<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo QR Code Miễn Phí & Đẹp – Đỉnh Kout Chỉ Có Ở Biệt Đội Tinh Nhuệ!</title>

    <!-- SEO and Social Media Meta Tags -->
    <meta name="description" content="Công cụ tạo QR code miễn phí. Tùy chỉnh màu sắc, thêm logo, bo góc và tải file PNG, SVG chất lượng cao. Nhanh chóng, không quảng cáo, không hết hạn.">
    <meta name="keywords" content="tạo qr code, qr code miễn phí, qr generator, tạo mã qr, biệt đội tinh nhuệ, qr code có logo, tùy chỉnh qr code, tạo qr code online, qr code cho link, qr code wifi, qr code chất lượng cao, qr png, free qr code generator, custom qr code">
    <meta property="og:title" content="Tạo QR Code Đẹp & Miễn Phí | Công cụ từ Biệt đội tinh nhuệ" />
    <meta property="og:description" content="Tạo mã QR độc đáo với logo, màu sắc tùy chỉnh. Công cụ miễn phí, nhanh chóng và không giới hạn." />
    <meta property="og:image" content="https://raw.githubusercontent.com/bietdoitinhnhue/server-manager/refs/heads/main/tao-qr.png" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Tạo QR Code Đẹp & Miễn Phí | Công cụ từ Biệt đội tinh nhuệ">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/bietdoitinhnhue/server-manager/refs/heads/main/tao-qr.png">

    <!-- Favicon and Fonts -->
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/bietdoitinhnhue/tramtaichinh/refs/heads/main/VNR.PNG">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- QR Code Styling Library -->
    <script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
    
    <style>
        :root {
            --shopee-orange: #ee4d2d;
            --shopee-orange-hover: #d73210;
            --navy-bg: #1f2937;
            --notice-bg: #004a7f;
            --text-heading: #344054;
            --text-body: #475467;
            --border-color: #d0d5dd;
            --input-bg: #ffffff;
            --card-bg: #ffffff;
            --btn-secondary-bg: #344054;
            --btn-secondary-hover: #475467;

            /* Biet Doi Tinh Nhue Glow Effect */
            --primary-blue: #00A9E0;
            --glow-color: rgba(0, 169, 224, 0.5);
            --dark-bg: #0A0F1A;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dark-bg); /* Biet Doi Tinh Nhue Background */
            color: var(--text-body);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .page-header {
            background-color: var(--navy-bg);
            color: #fff;
            text-align: center;
            padding: 2rem 1rem;
        }
        .page-header h1 {
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 1px;
        }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            padding: 32px 24px;
        }

        .page-container {
            width: 100%;
            max-width: 960px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            /* Biet Doi Tinh Nhue Glow Effect */
            border: 1px solid var(--primary-blue);
            box-shadow: 0 0 20px var(--glow-color);
        }
        
        .card-title {
            display: flex; align-items: center; gap: 12px;
            font-size: 1.125rem; font-weight: 600;
            color: var(--text-heading);
            margin-bottom: 20px;
        }
        .card-title svg { color: var(--shopee-orange); }

        .guide-list {
            list-style-position: inside; padding-left: 4px;
            display: flex; flex-direction: column; gap: 8px;
        }
        .guide-list li::marker { color: var(--shopee-orange); }
        .guide-list .highlight {
            color: var(--shopee-orange);
            font-weight: 600;
            animation: fadeInHighlight 2s ease-in-out infinite alternate;
        }

        @keyframes fadeInHighlight {
            from { opacity: 0.7; }
            to { opacity: 1; }
        }

        .generator-block {
            display: flex;
            gap: 30px;
        }
        .main-content {
            flex: 3;
            min-width: 300px;
        }
        .preview-sidebar {
            flex: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            min-width: 280px;
            position: sticky;
            top: 2rem;
            align-self: flex-start;
        }
        .preview-sidebar h2 { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-heading); }

        label {
            font-weight: 500; font-size: 0.875rem;
            color: var(--text-heading); display: block;
            margin-bottom: 6px;
        }
        input[type="text"], input[type="password"], input[type="tel"], input[type="email"], select {
            width: 100%; padding: 10px 14px;
            border-radius: 8px; 
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            font-family: 'Inter', sans-serif; font-size: 1rem;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
            transition: all 0.2s ease;
        }
        input:focus, select:focus {
            outline: none; 
            border-color: var(--shopee-orange);
            box-shadow: 0 0 0 4px rgba(238, 77, 45, 0.1);
        }
        .input-group { margin-bottom: 16px; }

        .tabs {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 25px;
        }
        .tab-link {
            display: inline-flex; align-items: center; gap: 8px;
            background: none; border: none;
            color: var(--text-body);
            padding: 12px 0; margin-right: 24px;
            cursor: pointer; font-size: 1rem;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-link:hover { color: var(--text-heading); }
        .tab-link.active {
            color: var(--shopee-orange);
            border-bottom-color: var(--shopee-orange);
            font-weight: 600;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .customize-section {
            margin-top: 30px;
            border-top: 1px solid var(--border-color);
            padding-top: 25px;
        }
        .customize-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .customize-option > label {
            font-size: 1rem;
            color: var(--text-heading);
            flex-shrink: 0;
            margin-right: 15px;
        }
        .customize-option .control {
            width: 55%;
        }
        
        .color-picker-wrapper {
            position: relative;
            width: 55%;
            height: 44px;
        }
        .color-preview-box {
            width: 100%;
            height: 100%;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .color-preview-box:hover {
             border-color: var(--shopee-orange);
        }
        .color-picker-wrapper input[type="color"] {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .checkbox-container {
            width: 55%;
            height: 44px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            background-color: var(--input-bg);
            transition: all 0.2s ease;
        }
        .checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--shopee-orange);
        }

        #qr-preview-container {
            width: 100%;
            max-width: 300px;
            min-height: 300px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #qr-display-area {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #qr-display-area img, #qr-display-area canvas {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .download-buttons {
            margin-top: 25px;
            display: flex;
            gap: 15px;
            width: 100%;
        }
        .btn {
            flex: 1; padding: 12px 20px;
            border: none; border-radius: 5px; cursor: pointer;
            font-size: 1rem; font-weight: 500;
            transition: background-color 0.3s, transform 0.1s;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary { background-color: var(--shopee-orange); color: white; }
        .btn-primary:hover { background-color: var(--shopee-orange-hover); }
        .btn-secondary { background-color: var(--btn-secondary-bg); color: white; }
        .btn-secondary:hover { background-color: var(--btn-secondary-hover); }
        .btn:active { transform: scale(0.98); }

        .encryption-buttons {
            display: flex;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        .encryption-buttons input[type="radio"] {
            display: none;
        }
        .encryption-buttons label {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            background-color: #fff;
            color: var(--text-body);
            transition: all 0.2s ease;
            margin-bottom: 0;
            font-size: 0.9rem;
        }
        .encryption-buttons label:not(:last-child) {
            border-right: 1px solid var(--border-color);
        }
        .encryption-buttons input[type="radio"]:checked + label {
            background-color: var(--shopee-orange);
            color: #fff;
            font-weight: 600;
            border-color: var(--shopee-orange);
        }
        
        .notice-block {
            background-color: var(--notice-bg); color: #fff;
        }
        .notice-block .card-title { color: #fff; margin-bottom: 12px; }
        .notice-block .card-title svg { color: #fff; }
        .notice-block ul {
            list-style-position: inside; 
            padding-left: 4px;
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
            opacity: 0.9;
        }

        .contact-card { text-align: center; }
        .contact-button {
            display: inline-block; padding: 12px 24px;
            font-size: 1.1rem; font-weight: 600;
            color: var(--shopee-orange); background-color: #fff;
            border: 1px solid #e0e0e0; border-radius: 12px;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
            text-decoration: none; margin-bottom: 24px;
        }
        .social-icons { display: flex; justify-content: center; gap: 20px; }
        .social-icons a {
            display: flex; align-items: center; justify-content: center;
            width: 44px; height: 44px; border-radius: 50%;
            background-color: #fff; border: 1px solid #e0e0e0;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
            transition: all 0.2s ease-out;
        }
        .social-icons a:hover { transform: scale(0.9); border-color: var(--shopee-orange); }
        .social-icons svg { width: 24px; height: 24px; }
        .fb { color: #1877f3; } .tg { color: #229ed9; }
        .phone { color: #16c36c; } .mail { color: #eb5347; }
        .donate-qrs { display: flex; justify-content: center; gap: 24px; margin-top: 16px; flex-wrap: wrap; }
        .donate-qr-col { text-align: center; }
        .donate-qr-col img { width: 120px; height: 120px; border-radius: 8px; border: 1px solid var(--border-color); }
        .donate-qr-label { margin-top: 8px; font-weight: 500; }
        
        .customize-option-full {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }
        .customize-option-full > label {
            font-size: 1rem;
            color: var(--text-heading);
            margin-bottom: 12px;
        }
        .icon-selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
            gap: 10px;
        }
        .icon-option {
            position: relative;
        }
        .icon-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        .icon-option label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 8px;
            height: 100%;
            transition: all 0.2s ease;
            background-color: #fff;
            text-align: center;
        }
        .icon-option label img {
            width: 32px;
            height: 32px;
            margin-bottom: 4px;
        }
        .icon-option label span {
            font-size: 0.75rem;
            color: var(--text-body);
            line-height: 1.2;
        }
        .icon-option input[type="radio"]:checked + label {
            border-color: var(--shopee-orange);
            box-shadow: 0 0 0 2px rgba(238, 77, 45, 0.2);
        }
        .icon-option input[type="radio"]:focus-visible + label {
            border-color: var(--shopee-orange);
            box-shadow: 0 0 0 2px rgba(238, 77, 45, 0.2);
        }

        @media (max-width: 900px) {
            .generator-block { flex-direction: column; }
            .preview-sidebar { position: static; width: 100%; }
        }
    </style>
</head>
<body>

    <header class="page-header">
        <h1>Ai rồi cũng phải… tạo QR</h1>
    </header>
    
    <main>
        <div class="page-container">

            <div class="card">
                <h2 class="card-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="m19 19-7-7 7-7"/></svg>
                    Hướng Dẫn Nhanh
                </h2>
                <ul class="guide-list">
                    <li>Chọn loại QR (<span class="highlight">URL, WiFi, SĐT, Danh bạ, Ngân hàng</span>), rồi nhập nội dung.</li>
                    <li>Thích <span class="highlight">màu mè, thêm logo</span>? Chỉnh ngay bên dưới!</li>
                    <li>QR sẽ <span class="highlight">tự động cập nhật</span> để bạn xem trước.</li>
                    <li>Ổn áp thì bấm <span class="highlight">Tải QR</span> về máy là có ảnh PNG xịn sò!</li>
                </ul>
            </div>
            
            <div class="card generator-block">
                <!-- Main Content -->
                <div class="main-content">
                    <div class="tabs">
                        <button class="tab-link active" onclick="openTab(event, 'URL')">🔗 URL</button>
                        <button class="tab-link" onclick="openTab(event, 'Phone')">📞 SĐT</button>
                        <button class="tab-link" onclick="openTab(event, 'Contact')">👤 Danh bạ</button>
                        <button class="tab-link" onclick="openTab(event, 'WIFI')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M247.31,124.76c-.35-.79-8.42-18.58-27.69-38.4C194.5,64.5,162.79,52,128,52S61.5,64.5,36.38,86.36C17.11,106.18,9,124,8.69,124.76a8,8,0,0,0,0,6.48c.35.79,8.42,18.58,27.69,38.4C61.5,191.5,93.21,204,128,204s66.5-12.5,91.62-34.36c19.27-19.82,27.34-37.61,27.69-38.4A8,8,0,0,0,247.31,124.76ZM128,188c-30.78,0-57.67-11.19-79.93-31.17A131.39,131.39,0,0,1,25,128,131.39,131.39,0,0,1,48.07,99.17C70.33,79.19,97.22,68,128,68s57.67,11.19,79.93,31.17A131.39,131.39,0,0,1,231,128,131.39,131.39,0,0,1,207.93,156.83C185.67,176.81,158.78,188,128,188Zm0-40a28,28,0,1,0-28-28A28,28,0,0,0,128,148Z"></path></svg>
                             WIFI
                        </button>
                        <button class="tab-link" onclick="openTab(event, 'Bank')">🏦 Ngân hàng</button>
                    </div>

                    <div id="URL" class="tab-content active"><div class="input-group"><label for="url-input">Nhập URL trang web của bạn</label><input type="text" id="url-input" placeholder="https://drakenguyen.me"></div></div>
                    <div id="WIFI" class="tab-content">
                        <div class="input-group"><label for="wifi-ssid">Tên Mạng (SSID)</label><input type="text" id="wifi-ssid" placeholder="Nhập tên mạng WiFi"></div>
                        <div class="input-group"><label for="wifi-password">Mật khẩu</label><input type="password" id="wifi-password" placeholder="Để trống nếu không có mật khẩu"></div>
                        <div class="input-group">
                            <label>Mã hóa</label>
                            <div class="encryption-buttons">
                                <input type="radio" id="enc-none" name="wifi-encryption" value="nopass"><label for="enc-none">None</label>
                                <input type="radio" id="enc-wpa" name="wifi-encryption" value="WPA" checked><label for="enc-wpa">WPA/WPA2</label>
                                <input type="radio" id="enc-wep" name="wifi-encryption" value="WEP"><label for="enc-wep">WEP</label>
                            </div>
                        </div>
                    </div>
                    <div id="Phone" class="tab-content"><div class="input-group"><label for="phone-input">Nhập số điện thoại</label><input type="tel" id="phone-input" placeholder="0968333342"></div></div>
                    <div id="Contact" class="tab-content">
                        <div class="input-group"><label for="contact-name">Họ và Tên</label><input type="text" id="contact-name" placeholder="Drake Nguyen"></div>
                        <div class="input-group"><label for="contact-phone">Số điện thoại</label><input type="tel" id="contact-phone" placeholder="0585574757"></div>
                        <div class="input-group"><label for="contact-email">Email</label><input type="email" id="contact-email" placeholder="seodukich@gmail.com"></div>
                    </div>
                    <div id="Bank" class="tab-content">
                        <div class="input-group search-dropdown-container">
                            <label for="bank-search">Tên Ngân hàng</label>
                            <input type="text" id="bank-search" placeholder="Gõ để tìm ngân hàng...">
                            <div id="bank-dropdown" class="search-dropdown-list"></div>
                        </div>
                        <div class="input-group"><label for="bank-account-number">Số tài khoản</label><input type="text" id="bank-account-number" placeholder="Nhập số tài khoản"></div>
                        <div class="input-group"><label for="bank-account-name">Họ tên chủ tài khoản (không dấu)</label><input type="text" id="bank-account-name" placeholder="NGUYEN VAN A"></div>
                        <div class="input-group"><label for="bank-amount">Số tiền (Không bắt buộc)</label><input type="text" id="bank-amount" placeholder="100000"></div>
                        <div class="input-group"><label for="bank-description">Nội dung chuyển khoản (Không bắt buộc)</label><input type="text" id="bank-description" placeholder="Chuyen khoan"></div>
                        <div class="input-group"><label for="bank-template">Mẫu QR</label>
                            <select id="bank-template">
                                <option value="compact2">QR và thông tin chuyển khoản</option>
                                <option value="compact">QR và logo Ngân hàng</option>
                                <option value="qr_only">Chỉ QR</option>
                                <option value="print">Đầy đủ</option>
                            </select>
                        </div>
                    </div>

                    <div class="customize-section">
                        <div class="customize-option">
                            <label for="dotstyle">Kiểu chấm</label>
                            <select id="dotstyle" class="control"><option value="square">Vuông (Cổ điển)</option><option value="dots">Chấm tròn</option><option value="rounded" selected>Bo tròn</option><option value="extra-rounded">Bo siêu tròn</option><option value="classy">Classy</option><option value="classy-rounded">Classy bo tròn</option></select>
                        </div>
                        <div class="customize-option">
                            <label for="qrcolor">Màu QR</label>
                            <div class="color-picker-wrapper">
                                <div id="qrcolor-preview" class="color-preview-box"></div>
                                <input type="color" id="qrcolor" value="#082868">
                            </div>
                        </div>
                        <div class="customize-option">
                            <label for="cornercolor">Màu góc vuông</label>
                            <div class="color-picker-wrapper">
                                <div id="cornercolor-preview" class="color-preview-box"></div>
                                <input type="color" id="cornercolor" value="#FF7300">
                            </div>
                        </div>
                        <div class="customize-option">
                           <label for="bgcolor">Màu nền</label>
                           <div class="color-picker-wrapper">
                                <div id="bgcolor-preview" class="color-preview-box"></div>
                                <input type="color" id="bgcolor" value="#ffffff">
                            </div>
                        </div>
                        <div class="customize-option">
                            <label for="transparentBG">Nền trong suốt</label>
                            <div class="checkbox-container">
                                <input type="checkbox" id="transparentBG">
                            </div>
                        </div>
                        
                        <!-- New WiFi Icon Selector -->
                        <div class="customize-option-full" id="wifi-icon-selector" style="display: none;">
                            <label>Chọn icon WiFi (không bắt buộc)</label>
                            <div class="icon-selection-grid" id="wifi-icon-grid">
                                <!-- Icons will be dynamically generated here by JS -->
                            </div>
                        </div>

                        <div class="customize-option" id="logo-upload-option">
                            <label for="logoUpload">Logo (Không bắt buộc)</label>
                            <input type="file" id="logoUpload" class="control" accept="image/png, image/jpeg, image/svg+xml">
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="preview-sidebar">
                    <h2>Xem trước</h2>
                    <div id="qr-preview-container">
                        <div id="qr-display-area"></div>
                    </div>
                    <div class="download-buttons">
                        <button id="download-png-btn" class="btn btn-primary">Tải PNG</button>
                        <button id="download-svg-btn" class="btn btn-secondary">Tải SVG</button>
                    </div>
                </div>
            </div>

            <div class="card notice-block">
                <h3 class="card-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                    Dừng lại 3 giây đọc cái này đi ní!
                </h3>
                <ul>
                    <li>QR code này là <b>tĩnh</b>, miễn phí và không hết hạn.</li>
                    <li>Bạn có thể dùng trên mọi thiết bị, in ấn thoải mái.</li>
                    <li>Mã QR được tạo ra có chất lượng cao, phù hợp cho in ấn.</li>
                    <li>Logo nên là ảnh PNG trong suốt để có hiệu ứng đẹp nhất.</li>
                </ul>
            </div>

            <div class="card contact-card">
                <a href="https://facebook.com/drakenguyen.me" target="_blank" class="contact-button">HELP ME, BRO! 👇</a>
                <div class="social-icons">
                    <a class="fb" href="https://m.me/drakenguyen.me" target="_blank" title="Facebook"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84, 3.44 8.87, 8, 9.8V15H8v-3h2V9.5C10 7.57, 11.57, 6, 13.5, 6H16v3h-2c-.55, 0, -1, .45, -1, 1v2h3v3h-3v6.95c5.05-.5, 9, -4.76, 9, -9.95z"/></svg></a>
                    <a class="tg" href="https://t.me/drakenguyen" target="_blank" title="Telegram"><svg viewBox="0 0 24 24" fill="currentColor"><path d="m9.417, 15.181, -.397, 5.584c.568, 0, .814-.244, 1.109-.537l2.663-2.545, 5.518, 4.041c1.012.564, 1.725.267, 1.998-.931L22.43, 3.947c.327-1.494-.586-2.095-1.516-1.518L3.234, 8.724c-1.465.613-1.45, 1.44-.256, 1.817l5.445, 1.622, 12.63-7.957c.565-.353.96.042.534.417L9.417, 15.18z"/></svg></a>
                    <a class="phone" href="tel:0968333342" title="Gọi 0968 3333 42"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62, 10.79c1.44, 2.83, 3.76, 5.14, 6.59, 6.59l2.2-2.2c.27-.27.67-.36, 1.02-.24, 1.12.37, 2.33.57, 3.57.57.55, 0, 1, .45, 1, 1V20c0, .55, -.45, 1, -1, 1-9.39, 0-17-7.61-17-17, 0-.55.45-1, 1-1h3.5c.55, 0, 1, .45, 1, 1, 0, 1.25.2, 2.45.57, 3.57.11.35.03.74-.25, 1.02l-2.2, 2.2z"/></svg></a>
                    <a class="mail" href="mailto:drakenguyen.me@gmail.com" title="Gửi mail"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M22, 6c0-1.1-.9-2-2-2H4c-1.1, 0-2, .9-2, 2v12c0, 1.1.9, 2, 2, 2h16c1.1, 0, 2-.9, 2-2V6zm-2, 0-8, 5-8-5h16zm0, 12H4V8l8, 5, 8-5v10z"/></svg></a>
                </div>
            </div>
            
            <div class="card">
                <h2 class="card-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 19.5c3.33-2 5-5.5 5-9.5A7 7 0 0 0 5.24 6"/><path d="M14 14v6"/><path d="M10 14v6"/><path d="M12 20h.01"/><path d="M12 14h.01"/><path d="M12 11h.01"/><path d="M12 8h.01"/><path d="M16 2.5c2.34 2.34 2.34 6.16 0 8.5L12.5 14.5h-1L8 11c-2.34-2.34-2.34-6.16 0-8.5C9.57.93 14.43.93 16 2.5Z"/></svg>
                    Nếu công cụ này “ổn áp”, cà phê là cách cảm ơn cực “mlem”!
                </h2>
                <div class="donate-qrs">
                    <div class="donate-qr-col"><img src="https://raw.githubusercontent.com/bietdoitinhnhue/server-manager/refs/heads/main/Vietcombank_9968333342.png" alt="QR Vietcombank"><div class="donate-qr-label">Vietcombank</div></div>
                    <div class="donate-qr-col"><img src="https://raw.githubusercontent.com/bietdoitinhnhue/server-manager/refs/heads/main/Momo_Drakenguyen.png" alt="QR Momo"><div class="donate-qr-label">Momo</div></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let qrCode;
        let userLogoDataUrl = null;
        let debounceTimer;
        let currentTab = 'URL';
        let bankList = [];
        let selectedBank = null;
        const qrDisplayArea = document.getElementById('qr-display-area');

        // --- List of available WiFi icons ---
        const wifiIcons = [
            { id: 'wifi-icon-1', name: 'Mẫu 1', dataUrl: 'https://raw.githubusercontent.com/bietdoitinhnhue/tools/refs/heads/main/wifi_mau01.png' },
            { id: 'wifi-icon-2', name: 'Mẫu 2', dataUrl: 'https://raw.githubusercontent.com/bietdoitinhnhue/tools/refs/heads/main/Wifi_mau02.png' },
            { id: 'wifi-icon-3', name: 'Mẫu 3', dataUrl: 'https://raw.githubusercontent.com/bietdoitinhnhue/tools/refs/heads/main/Wifi_mau03.png' },
            { id: 'wifi-icon-4', name: 'Mẫu 4', dataUrl: 'https://raw.githubusercontent.com/bietdoitinhnhue/tools/refs/heads/main/Wifi_mau04.png' }
        ];

        function initializeColorPicker(previewId, inputId) {
            const previewBox = document.getElementById(previewId);
            const colorInput = document.getElementById(inputId);
            if(!previewBox || !colorInput) return;
            previewBox.style.backgroundColor = colorInput.value;
            colorInput.addEventListener('input', () => {
                previewBox.style.backgroundColor = colorInput.value;
            });
        }

        function removeAccents(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/đ/g, "d").replace(/Đ/g, "D");
        }

        function populateWifiIcons() {
            const grid = document.getElementById('wifi-icon-grid');
            if (!grid) return;

            // Add "None" option first
            let noneHtml = `
                <div class="icon-option">
                    <input type="radio" name="wifi-icon" id="wifi-icon-none" value="none" checked>
                    <label for="wifi-icon-none">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#d0d5dd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M15 9L9 15" stroke="#d0d5dd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 9L15 15" stroke="#d0d5dd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Không có</span>
                    </label>
                </div>`;
            grid.innerHTML += noneHtml;

            // Add other icons
            wifiIcons.forEach(icon => {
                let iconHtml = `
                    <div class="icon-option">
                        <input type="radio" name="wifi-icon" id="${icon.id}" value="${icon.dataUrl}">
                        <label for="${icon.id}">
                            <img src="${icon.dataUrl}" alt="${icon.name}">
                            <span>${icon.name}</span>
                        </label>
                    </div>`;
                grid.innerHTML += iconHtml;
            });

            // Add event listeners to new radio buttons
            document.querySelectorAll('input[name="wifi-icon"]').forEach(radio => {
                radio.addEventListener('change', debounceUpdate);
            });
        }

        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const response = await fetch('https://api.vietqr.io/v2/banks');
                const data = await response.json();
                bankList = data.data;
            } catch (error) {
                console.error("Failed to fetch bank list:", error);
            }

            qrCode = new QRCodeStyling({
                width: 250, height: 250, type: 'svg',
                dotsOptions: { color: "#082868", type: "rounded" },
                backgroundOptions: { color: "#FFFFFF" },
                cornersSquareOptions: { color: "#FF7300" },
                imageOptions: { 
                    crossOrigin: "anonymous", 
                    margin: 5, 
                    imageSize: 0.4,
                    hideBackgroundDots: true
                }
            });
            
            populateWifiIcons();
            initializeColorPicker('qrcolor-preview', 'qrcolor');
            initializeColorPicker('bgcolor-preview', 'bgcolor');
            initializeColorPicker('cornercolor-preview', 'cornercolor');

            document.querySelectorAll('input, select').forEach(el => {
                el.addEventListener('input', debounceUpdate);
                el.addEventListener('change', debounceUpdate);
            });
            
            const transparentCheckbox = document.getElementById('transparentBG');
            transparentCheckbox.addEventListener('change', function() {
                document.getElementById('bgcolor').disabled = this.checked;
                document.getElementById('bgcolor-preview').parentElement.style.opacity = this.checked ? 0.5 : 1;
            });

            openTab({currentTarget: document.querySelector('.tab-link.active')}, 'URL');
        });

        function renderBankDropdown(banks) {
            const bankDropdown = document.getElementById('bank-dropdown');
            bankDropdown.innerHTML = '';
            banks.forEach(bank => {
                const item = document.createElement('div');
                item.className = 'search-dropdown-item';
                item.innerHTML = `<img src="${bank.logo}" alt="${bank.shortName}"><span>${bank.shortName} - ${bank.name}</span>`;
                item.addEventListener('click', () => {
                    document.getElementById('bank-search').value = `${bank.shortName} - ${bank.name}`;
                    selectedBank = bank;
                    bankDropdown.style.display = 'none';
                    debounceUpdate();
                });
                bankDropdown.appendChild(item);
            });
            bankDropdown.style.display = 'block';
        }
        
        function openTab(evt, tabName) {
            currentTab = tabName;
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            document.querySelectorAll('.tab-link').forEach(tl => tl.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
            
            const customizeSection = document.querySelector('.customize-section');
            const downloadSvgBtn = document.getElementById('download-svg-btn');
            const wifiIconSelector = document.getElementById('wifi-icon-selector');
            
            if (tabName === 'Bank') {
                customizeSection.style.display = 'none';
                downloadSvgBtn.style.display = 'none';
            } else {
                customizeSection.style.display = 'block';
                downloadSvgBtn.style.display = 'inline-flex';
            }

            wifiIconSelector.style.display = (tabName === 'WIFI') ? 'flex' : 'none';
            
            debounceUpdate();
        }

        const debounceUpdate = () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(updateQRCode, 200);
        };

        function updateQRCode() {
            qrDisplayArea.innerHTML = '';

            if (currentTab === 'Bank') {
                if (selectedBank) {
                    const accountNumber = document.getElementById('bank-account-number').value;
                    if (accountNumber) {
                        const accountName = document.getElementById('bank-account-name').value;
                        const amount = document.getElementById('bank-amount').value;
                        const description = document.getElementById('bank-description').value;
                        const template = document.getElementById('bank-template').value;
                        
                        let quicklink = `https://img.vietqr.io/image/${selectedBank.bin}-${accountNumber}-${template}.png`;
                        const params = new URLSearchParams();
                        if(accountName) params.append('accountName', accountName);
                        if(amount) params.append('amount', amount);
                        if(description) params.append('addInfo', description);
                        
                        const paramString = params.toString();
                        if (paramString) quicklink += `?${paramString}`;

                        const img = document.createElement('img');
                        img.src = quicklink;
                        qrDisplayArea.appendChild(img);
                    }
                }
            } else {
                qrCode.append(qrDisplayArea);
                let data = "";
                let image = null;

                if (currentTab === 'URL') {
                    data = document.getElementById('url-input').value || "https://drakenguyen.me";
                } else if (currentTab === 'WIFI') {
                    const ssid = document.getElementById('wifi-ssid').value;
                    const password = document.getElementById('wifi-password').value;
                    const encryption = document.querySelector('input[name="wifi-encryption"]:checked').value;
                    data = `WIFI:T:${encryption};S:${ssid};P:${password};;`;
                    
                    const selectedIcon = document.querySelector('input[name="wifi-icon"]:checked');
                    if (selectedIcon && selectedIcon.value !== 'none') {
                        image = selectedIcon.value;
                    }
                } else if (currentTab === 'Phone') {
                    data = document.getElementById('phone-input').value ? `tel:${document.getElementById('phone-input').value}` : "tel:";
                } else if (currentTab === 'Contact') {
                    const name = document.getElementById('contact-name').value;
                    const phone = document.getElementById('contact-phone').value;
                    const email = document.getElementById('contact-email').value;
                    data = `BEGIN:VCARD\nVERSION:3.0\nFN:${name}\nTEL;TYPE=WORK,VOICE:${phone}\nEMAIL:${email}\nEND:VCARD`;
                }

                if (userLogoDataUrl) {
                    image = userLogoDataUrl;
                }

                const color = document.getElementById('qrcolor').value;
                const cornerColor = document.getElementById('cornercolor').value;
                const bgcolorInput = document.getElementById('bgcolor');
                const transparent = document.getElementById('transparentBG').checked;
                const dotstyle = document.getElementById('dotstyle').value;
                const bgColorValue = transparent ? 'transparent' : bgcolorInput.value;
                
                qrCode.update({
                    data: data || " ",
                    dotsOptions: { color: color, type: dotstyle },
                    cornersSquareOptions: { color: cornerColor },
                    backgroundOptions: { color: bgColorValue },
                    image: image,
                });
                document.getElementById('qr-preview-container').style.backgroundColor = transparent ? 'transparent' : bgcolorInput.value;
            }
        }

        function downloadFile(extension) {
            if (currentTab === 'Bank') {
                const imgElement = qrDisplayArea.querySelector('img');
                if (imgElement && imgElement.src) {
                    fetch(imgElement.src)
                        .then(res => res.blob())
                        .then(blob => {
                            const url = window.URL.createObjectURL(blob);
                            const link = document.createElement('a');
                            link.href = url;
                            link.download = 'vietqr.png';
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                            window.URL.revokeObjectURL(url);
                        })
                        .catch(() => alert('Không thể tải ảnh QR. Vui lòng thử lại.'));
                } else {
                    alert('Vui lòng điền đủ thông tin ngân hàng để tạo mã QR.');
                }
            } else {
                if (!qrCode) { alert('Vui lòng đợi QR được tạo xong!'); return; }
                const downloadOptions = {
                    name: "bietdoitinhnhue-qr",
                    extension: extension
                };
                
                const highResQR = new QRCodeStyling({
                    ...qrCode._options, 
                    width: 1024, 
                    height: 1024
                });
                highResQR.download(downloadOptions);
            }
        }
    </script>
</body>
</html>
